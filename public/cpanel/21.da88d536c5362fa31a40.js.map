{"version":3,"sources":["webpack:///21.da88d536c5362fa31a40.js","webpack:///nav-bar.vue?c024*******************","webpack:///./src/components/nav-bar.vue?7820********************","webpack:///./src/components/nav-bar.vue?a76f*******************","webpack:///card.vue","webpack:///./src/views/card.vue?4de6","webpack:///./src/views/card.vue"],"names":["webpackJsonp",1,"module","exports","Object","defineProperty","value","methods","GoBack","this","$route","router","go","window","history","back",2,3,"__webpack_require__","__vue_script__","__vue_template__","__esModule","options","template",74,"_actions","vuex","getters","isLogged","state","merchant","access_token","actions","showAlert","showLoading","hideLoading","data","user_card","route","transition","params","$http","get","user_card_id","card_id","then","response","next","error","inputFileClick","$els","avatar","click","uploadAvatar","formData","FormData","append","files","put","$set","update","title","prerogative","description","notice","updateRules","bonus_rules","bonus_cleared","balance_rules","cost_money_unit","increase_bonus","max_increase_bonus","init_increase_bonus","cost_bonus_unit","reduce_money","least_money_to_use_bonus","max_reduce_bonus","discount","pushToWeixin","alert","components","nav-bar",110,138],"mappings":"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","file":"21.da88d536c5362fa31a40.js","sourcesContent":["webpackJsonp([21],{\n\n/***/ 1:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  methods: {\n\t    GoBack: function GoBack() {\n\t      this.$route.router.go(window.history.back());\n\t    }\n\t  }\n\t};\n\n/***/ },\n\n/***/ 2:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<div class=\\\"navbar navbar-light bg-faded navigation\\\"> <a class=\\\"nav-link btn btn-primary-outline btn-sm\\\" @click=GoBack> <i class=\\\"fa fa-arrow-left\\\"></i> 返回 </a> <slot name=title></slot> <slot name=right-content></slot> </div>\";\n\n/***/ },\n\n/***/ 3:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__vue_script__ = __webpack_require__(1)\n\t__vue_template__ = __webpack_require__(2)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ },\n\n/***/ 74:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _actions = __webpack_require__(4);\n\t\n\texports.default = {\n\t  vuex: {\n\t    getters: {\n\t      isLogged: function isLogged(state) {\n\t        return state.merchant.isLogged;\n\t      },\n\t      access_token: function access_token(state) {\n\t        return state.merchant.merchant.access_token;\n\t      }\n\t    },\n\t    actions: {\n\t      showAlert: _actions.showAlert,\n\t      showLoading: _actions.showLoading,\n\t      hideLoading: _actions.hideLoading\n\t    }\n\t  },\n\t  data: function data() {\n\t    return {\n\t      user_card: {}\n\t    };\n\t  },\n\t\n\t  route: {\n\t    data: function data(transition) {\n\t      this.showLoading();\n\t      var params = this.$route.params;\n\t      this.$http.get('http://jiancan.me/api/m1/user_cards/one.json', {\n\t        access_token: this.access_token, user_card_id: params.card_id\n\t      }).then(function (response) {\n\t        transition.next({\n\t          user_card: response.data\n\t        });\n\t      }, function (response) {\n\t        this.showAlert(response.data.error);\n\t      });\n\t      this.hideLoading();\n\t    }\n\t  },\n\t  methods: {\n\t    inputFileClick: function inputFileClick() {\n\t      return this.$els.avatar.click();\n\t    },\n\t    uploadAvatar: function uploadAvatar() {\n\t      this.showLoading();\n\t\n\t      if (this.$els.avatar.value === '') return;\n\t      var formData = new FormData();\n\t      formData.append('access_token', this.access_token);\n\t      formData.append('user_card_id', this.$route.params.card_id);\n\t      formData.append('user_card[logo]', this.$els.avatar.files[0]);\n\t\n\t      this.$http.put('http://jiancan.me/api/m1/user_cards/one.json', formData).then(function (response) {\n\t        this.$set('user_card', response.data.user_card);\n\t      }, function (response) {\n\t        this.showAlert(response.data.error);\n\t      });\n\t      this.hideLoading();\n\t    },\n\t    update: function update() {\n\t      this.showLoading();\n\t\n\t      var formData = new FormData();\n\t      formData.append('access_token', this.access_token);\n\t      formData.append('user_card_id', this.$route.params.card_id);\n\t      formData.append('user_card[title]', this.user_card.title);\n\t      formData.append('user_card[prerogative]', this.user_card.prerogative);\n\t      formData.append('user_card[description]', this.user_card.description);\n\t      formData.append('user_card[notice]', this.user_card.notice);\n\t\n\t      this.$http.put('http://jiancan.me/api/m1/user_cards/one.json', formData).then(function (response) {\n\t        this.$set('user_card', response.data.user_card);\n\t      }, function (response) {\n\t        this.showAlert(response.data.error);\n\t      });\n\t      this.hideLoading();\n\t    },\n\t    updateRules: function updateRules() {\n\t      this.showLoading();\n\t\n\t      var formData = new FormData();\n\t      formData.append('access_token', this.access_token);\n\t      formData.append('user_card_id', this.$route.params.card_id);\n\t      formData.append('user_card[title]', this.user_card.title);\n\t      formData.append('user_card[prerogative]', this.user_card.prerogative);\n\t      formData.append('user_card[description]', this.user_card.description);\n\t      formData.append('user_card[notice]', this.user_card.notice);\n\t      formData.append('user_card[bonus_rules]', this.user_card.bonus_rules);\n\t      formData.append('user_card[bonus_cleared]', this.user_card.bonus_cleared);\n\t      formData.append('user_card[balance_rules]', this.user_card.balance_rules);\n\t      formData.append('user_card[cost_money_unit]', this.user_card.cost_money_unit);\n\t      formData.append('user_card[increase_bonus]', this.user_card.increase_bonus);\n\t      formData.append('user_card[max_increase_bonus]', this.user_card.max_increase_bonus);\n\t      formData.append('user_card[init_increase_bonus]', this.user_card.init_increase_bonus);\n\t      formData.append('user_card[cost_bonus_unit]', this.user_card.cost_bonus_unit);\n\t      formData.append('user_card[reduce_money]', this.user_card.reduce_money);\n\t      formData.append('user_card[least_money_to_use_bonus]', this.user_card.least_money_to_use_bonus);\n\t      formData.append('user_card[max_reduce_bonus]', this.user_card.max_reduce_bonus);\n\t      formData.append('user_card[discount]', this.user_card.discount);\n\t\n\t      this.$http.put('http://jiancan.me/api/m1/user_cards/one.json', formData).then(function (response) {\n\t        this.$set('user_card', response.data.user_card);\n\t      }, function (response) {\n\t        this.showAlert(response.data.error);\n\t      });\n\t      this.hideLoading();\n\t    },\n\t    pushToWeixin: function pushToWeixin() {\n\t      this.showLoading();\n\t\n\t      this.$http.get('http://jiancan.me/api/m1/user_cards/push.json', { access_token: this.access_token, user_card_id: this.$route.params.card_id }).then(function (response) {\n\t        alert('同步成功！');\n\t      }, function (response) {\n\t        this.showAlert(response.data.error);\n\t      });\n\t      this.hideLoading();\n\t    }\n\t  },\n\t  components: {\n\t    'nav-bar': __webpack_require__(3)\n\t  }\n\t};\n\n/***/ },\n\n/***/ 110:\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<nav-bar> <span slot=title class=title>会员卡管理 - {{user_card.title}}</span> <a slot=right-content @click=pushToWeixin class=\\\"nav-link btn btn-danger btn-sm pull-xs-right\\\">同步到微信</a> </nav-bar> <table class=table> <thead> <tr> <td colspan=2> 卡券基本信息 </td> </tr> </thead> <tbody> <tr> <td style=width:200px;padding-left:50px> <img @click=inputFileClick alt=会员卡Logo class=img-circle width=100 height=100 v-bind:src=user_card.logo /> <input @change=uploadAvatar v-el:avatar class=avatar type=file accept=image/* style=display:none /> </td> <td> <div class=content-form> <form @submit=update> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">卡券名</label> <div class=col-sm-10> <input class=form-control placeholder=卡券名 type=text v-model=user_card.title /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">特权说明</label> <div class=col-sm-10> <input class=form-control placeholder=特权说明 type=text v-model=user_card.prerogative /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">使用说明</label> <div class=col-sm-10> <input class=form-control placeholder=使用说明 type=text v-model=user_card.description /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">使用提醒</label> <div class=col-sm-10> <input class=form-control placeholder=使用提醒 type=text v-model=user_card.notice /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">服务电话</label> <div class=col-sm-10> <input class=form-control placeholder=服务电话 type=text v-model=user_card.service_phone /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\"></label> <div class=col-sm-10> <input type=submit name=commit value=\\\"保 存\\\" class=\\\"btn btn-primary\\\"/> </div> </div> </form> </div> </td> </tr> </tbody> </table> <form @submit=updateRules> <table class=table> <thead> <tr> <td colspan=2> 卡券金融信息 </td> </tr> </thead> <tbody> <tr> <td colspan=2> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">消费金额</label> <div class=col-sm-4> <input class=form-control placeholder=消费金额 type=text v-model=user_card.cost_money_unit /> <small class=text-muted>以分为单位</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">增加积分</label> <div class=col-sm-4> <input class=form-control placeholder=增加积分 type=text v-model=user_card.increase_bonus /> <small class=text-muted>对应增加的积分</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">积分上限</label> <div class=col-sm-4> <input class=form-control placeholder=积分上限 type=text v-model=user_card.max_increase_bonus /> <small class=text-muted>用户单次可获取的积分上限</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">初始积分</label> <div class=col-sm-4> <input class=form-control placeholder=初始积分 type=text v-model=user_card.init_increase_bonus /> <small class=text-muted>初始设置积分</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">最低使用</label> <div class=col-sm-4> <input class=form-control placeholder=最低使用 type=text v-model=user_card.cost_bonus_unit /> <small class=text-muted>每次最低使用积分</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">抵扣金额</label> <div class=col-sm-4> <input class=form-control placeholder=抵扣金额 type=text v-model=user_card.reduce_money /> <small class=text-muted>抵扣xx元，（这里以分为单位）</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">抵扣条件</label> <div class=col-sm-4> <input class=form-control placeholder=抵扣条件 type=text v-model=user_card.least_money_to_use_bonus /> <small class=text-muted>满xx元（这里以分为单位）可用。</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">单笔最多</label> <div class=col-sm-4> <input class=form-control placeholder=单笔最多 type=text v-model=user_card.max_reduce_bonus /> <small class=text-muted>单笔最多使用xx积分。</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">享受折扣</label> <div class=col-sm-4> <input class=form-control placeholder=享受折扣 type=text v-model=user_card.discount /> <small class=text-muted>该卡享受的折扣优惠,填10就是九折。</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">储值说明</label> <div class=col-sm-4> <input class=form-control placeholder=储值说明 type=text v-model=user_card.balance_rules /> <small class=text-muted>该卡储值功能说明</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">积分规则</label> <div class=col-sm-4> <input class=form-control placeholder=积分规则 type=text v-model=user_card.bonus_rules /> <small class=text-muted>该卡积分规则</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">积分清零规则</label> <div class=col-sm-4> <input class=form-control placeholder=清零规则 type=text v-model=user_card.bonus_cleared /> <small class=text-muted>积分清零规则</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\"></label> <div class=col-sm-10> <input type=submit name=commit value=\\\"保 存\\\" class=\\\"btn btn-primary\\\"/> </div> </div> </td> </tr> </tbody> </table> </form> <table class=table> <tr> <td colspan=4> 拥有此卡的用户 </td> </tr> <tr v-for=\\\"user_card_user in user_card.user_card_users\\\"> <td> {{user_card_user.user.nickname}} </td> </tr> </table>\";\n\n/***/ },\n\n/***/ 138:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__vue_script__ = __webpack_require__(74)\n\t__vue_template__ = __webpack_require__(110)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 21.da88d536c5362fa31a40.js\n **/","<template>\n<div class=\"navbar navbar-light bg-faded navigation\">\n  <a class=\"nav-link btn btn-primary-outline btn-sm\" @click=\"GoBack\">\n    <i class=\"fa fa-arrow-left\"></i> 返回\n  </a>\n  <slot name=\"title\"></slot>\n  <slot name=\"right-content\"></slot>\n</div>\n</template>\n<script>\n  export default {\n    methods: {\n      GoBack () {\n        this.$route.router.go(window.history.back())\n      }\n    }\n  }\n</script>\n\n\n\n/** WEBPACK FOOTER **\n ** nav-bar.vue?666ab58b\n **/","module.exports = \"<div class=\\\"navbar navbar-light bg-faded navigation\\\"> <a class=\\\"nav-link btn btn-primary-outline btn-sm\\\" @click=GoBack> <i class=\\\"fa fa-arrow-left\\\"></i> 返回 </a> <slot name=title></slot> <slot name=right-content></slot> </div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/nav-bar.vue\n ** module id = 2\n ** module chunks = 0 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22\n **/","var __vue_script__, __vue_template__\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./nav-bar.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./nav-bar.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/nav-bar.vue\n ** module id = 3\n ** module chunks = 0 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22\n **/","<template>\n<nav-bar>\n  <span slot=\"title\" class=\"title\">会员卡管理 - {{user_card.title}}</span>\n  <a slot=\"right-content\" @click=\"pushToWeixin\" class=\"nav-link btn btn-danger btn-sm pull-xs-right\">同步到微信</a>\n</nav-bar>\n<table class=\"table\">\n  <thead>\n    <tr>\n      <td colspan=\"2\">\n        卡券基本信息\n      </td>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td style=\"width:200px;padding-left:50px;\">\n        <img @click=\"inputFileClick\" alt=\"会员卡Logo\" class=\"img-circle\" width=\"100\" height=\"100\" v-bind:src=\"user_card.logo\" />\n        <input @change=\"uploadAvatar\" v-el:avatar class=\"avatar\" type=\"file\" accept=\"image/*\" style=\"display:none;\" />\n      </td>\n      <td>\n        <div class=\"content-form\">\n          <form @submit=\"update\">\n            <div class=\"form-group row\">\n              <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">卡券名</label>\n              <div class=\"col-sm-10\">\n                <input class=\"form-control\" placeholder=\"卡券名\" type=\"text\" v-model=\"user_card.title\" />\n              </div>\n            </div>\n            <div class=\"form-group row\">\n              <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">特权说明</label>\n              <div class=\"col-sm-10\">\n                <input class=\"form-control\" placeholder=\"特权说明\" type=\"text\" v-model=\"user_card.prerogative\" />\n              </div>\n            </div>\n            <div class=\"form-group row\">\n              <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">使用说明</label>\n              <div class=\"col-sm-10\">\n                <input class=\"form-control\" placeholder=\"使用说明\" type=\"text\" v-model=\"user_card.description\" />\n              </div>\n            </div>\n            <div class=\"form-group row\">\n              <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">使用提醒</label>\n              <div class=\"col-sm-10\">\n                <input class=\"form-control\" placeholder=\"使用提醒\" type=\"text\" v-model=\"user_card.notice\" />\n              </div>\n            </div>\n            <div class=\"form-group row\">\n              <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">服务电话</label>\n              <div class=\"col-sm-10\">\n                <input class=\"form-control\" placeholder=\"服务电话\" type=\"text\" v-model=\"user_card.service_phone\" />\n              </div>\n            </div>\n            <div class=\"form-group row\">\n              <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\"></label>\n              <div class=\"col-sm-10\">\n                <input type=\"submit\" name=\"commit\" value=\"保 存\" class=\"btn btn-primary\" />\n              </div>\n            </div>\n          </form>\n        </div>\n      </td>\n    </tr>\n  </tbody>\n</table>\n<form @submit=\"updateRules\">\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <td colspan=\"2\">\n          卡券金融信息\n        </td>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td colspan=\"2\">\n          <div class=\"form-group row\">\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">消费金额</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"消费金额\" type=\"text\" v-model=\"user_card.cost_money_unit\" />\n              <small class=\"text-muted\">以分为单位</small>\n            </div>\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">增加积分</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"增加积分\" type=\"text\" v-model=\"user_card.increase_bonus\" />\n              <small class=\"text-muted\">对应增加的积分</small>\n            </div>\n          </div>\n          <div class=\"form-group row\">\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">积分上限</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"积分上限\" type=\"text\" v-model=\"user_card.max_increase_bonus\" />\n              <small class=\"text-muted\">用户单次可获取的积分上限</small>\n            </div>\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">初始积分</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"初始积分\" type=\"text\" v-model=\"user_card.init_increase_bonus\" />\n              <small class=\"text-muted\">初始设置积分</small>\n            </div>\n          </div>\n          <div class=\"form-group row\">\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">最低使用</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"最低使用\" type=\"text\" v-model=\"user_card.cost_bonus_unit\" />\n              <small class=\"text-muted\">每次最低使用积分</small>\n            </div>\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">抵扣金额</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"抵扣金额\" type=\"text\" v-model=\"user_card.reduce_money\" />\n              <small class=\"text-muted\">抵扣xx元，（这里以分为单位）</small>\n            </div>\n          </div>\n          <div class=\"form-group row\">\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">抵扣条件</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"抵扣条件\" type=\"text\" v-model=\"user_card.least_money_to_use_bonus\" />\n              <small class=\"text-muted\">满xx元（这里以分为单位）可用。</small>\n            </div>\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">单笔最多</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"单笔最多\" type=\"text\" v-model=\"user_card.max_reduce_bonus\" />\n              <small class=\"text-muted\">单笔最多使用xx积分。</small>\n            </div>\n          </div>\n          <div class=\"form-group row\">\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">享受折扣</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"享受折扣\" type=\"text\" v-model=\"user_card.discount\" />\n              <small class=\"text-muted\">该卡享受的折扣优惠,填10就是九折。</small>\n            </div>\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">储值说明</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"储值说明\" type=\"text\" v-model=\"user_card.balance_rules\" />\n              <small class=\"text-muted\">该卡储值功能说明</small>\n            </div>\n          </div>\n          <div class=\"form-group row\">\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">积分规则</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"积分规则\" type=\"text\" v-model=\"user_card.bonus_rules\" />\n              <small class=\"text-muted\">该卡积分规则</small>\n            </div>\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\">积分清零规则</label>\n            <div class=\"col-sm-4\">\n              <input class=\"form-control\" placeholder=\"清零规则\" type=\"text\" v-model=\"user_card.bonus_cleared\" />\n              <small class=\"text-muted\">积分清零规则</small>\n            </div>\n          </div>\n          <div class=\"form-group row\">\n            <label for=\"inputEmail3\" class=\"col-sm-2 form-control-label\"></label>\n            <div class=\"col-sm-10\">\n              <input type=\"submit\" name=\"commit\" value=\"保 存\" class=\"btn btn-primary\" />\n            </div>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</form>\n<table class=\"table\">\n  <tr>\n    <td colspan=\"4\">\n      拥有此卡的用户\n    </td>\n  </tr>\n  <tr v-for=\"user_card_user in user_card.user_card_users\">\n    <td>\n      {{user_card_user.user.nickname}}\n    </td>\n  </tr>\n</table>\n</template>\n<script>\n  import { showAlert, showLoading, hideLoading } from '../vuex/actions'\n\n  export default {\n    vuex: {\n      getters: {\n        isLogged: state => state.merchant.isLogged,\n        access_token: state => state.merchant.merchant.access_token\n      },\n      actions: {\n        showAlert,\n        showLoading,\n        hideLoading\n      }\n    },\n    data () {\n      return {\n        user_card: {}\n      }\n    },\n    route: {\n      data (transition) {\n        this.showLoading()\n        var params = this.$route.params\n        this.$http.get('http://jiancan.me/api/m1/user_cards/one.json', {\n          access_token: this.access_token, user_card_id: params.card_id\n        }).then(function (response) {\n          transition.next({\n            user_card: response.data\n          })\n        }, function (response) {\n          this.showAlert(response.data.error)\n        })\n        this.hideLoading()\n      }\n    },\n    methods: {\n      inputFileClick () {\n        return this.$els.avatar.click()\n      },\n      uploadAvatar () {\n        this.showLoading()\n\n        if (this.$els.avatar.value === '') return\n        var formData = new FormData()\n        formData.append('access_token', this.access_token)\n        formData.append('user_card_id', this.$route.params.card_id)\n        formData.append('user_card[logo]', this.$els.avatar.files[0])\n\n        this.$http.put('http://jiancan.me/api/m1/user_cards/one.json', formData).then(function (response) {\n          this.$set('user_card', response.data.user_card)\n        }, function (response) {\n          this.showAlert(response.data.error)\n        })\n        this.hideLoading()\n      },\n      update () {\n        this.showLoading()\n\n        var formData = new FormData()\n        formData.append('access_token', this.access_token)\n        formData.append('user_card_id', this.$route.params.card_id)\n        formData.append('user_card[title]', this.user_card.title)\n        formData.append('user_card[prerogative]', this.user_card.prerogative)\n        formData.append('user_card[description]', this.user_card.description)\n        formData.append('user_card[notice]', this.user_card.notice)\n\n        this.$http.put('http://jiancan.me/api/m1/user_cards/one.json', formData).then(function (response) {\n          this.$set('user_card', response.data.user_card)\n        }, function (response) {\n          this.showAlert(response.data.error)\n        })\n        this.hideLoading()\n      },\n      updateRules () {\n        this.showLoading()\n\n        var formData = new FormData()\n        formData.append('access_token', this.access_token)\n        formData.append('user_card_id', this.$route.params.card_id)\n        formData.append('user_card[title]', this.user_card.title)\n        formData.append('user_card[prerogative]', this.user_card.prerogative)\n        formData.append('user_card[description]', this.user_card.description)\n        formData.append('user_card[notice]', this.user_card.notice)\n        formData.append('user_card[bonus_rules]', this.user_card.bonus_rules)\n        formData.append('user_card[bonus_cleared]', this.user_card.bonus_cleared)\n        formData.append('user_card[balance_rules]', this.user_card.balance_rules)\n        formData.append('user_card[cost_money_unit]', this.user_card.cost_money_unit)\n        formData.append('user_card[increase_bonus]', this.user_card.increase_bonus)\n        formData.append('user_card[max_increase_bonus]', this.user_card.max_increase_bonus)\n        formData.append('user_card[init_increase_bonus]', this.user_card.init_increase_bonus)\n        formData.append('user_card[cost_bonus_unit]', this.user_card.cost_bonus_unit)\n        formData.append('user_card[reduce_money]', this.user_card.reduce_money)\n        formData.append('user_card[least_money_to_use_bonus]', this.user_card.least_money_to_use_bonus)\n        formData.append('user_card[max_reduce_bonus]', this.user_card.max_reduce_bonus)\n        formData.append('user_card[discount]', this.user_card.discount)\n\n        this.$http.put('http://jiancan.me/api/m1/user_cards/one.json', formData).then(function (response) {\n          this.$set('user_card', response.data.user_card)\n        }, function (response) {\n          this.showAlert(response.data.error)\n        })\n        this.hideLoading()\n      },\n      pushToWeixin () {\n        this.showLoading()\n\n        this.$http.get('http://jiancan.me/api/m1/user_cards/push.json', { access_token: this.access_token, user_card_id: this.$route.params.card_id }).then(function (response) {\n          alert('同步成功！')\n        }, function (response) {\n          this.showAlert(response.data.error)\n        })\n        this.hideLoading()\n      }\n    },\n    components: {\n      'nav-bar': require('../components/nav-bar.vue')\n    }\n  }\n</script>\n\n\n\n/** WEBPACK FOOTER **\n ** card.vue?ddaffb5e\n **/","module.exports = \"<nav-bar> <span slot=title class=title>会员卡管理 - {{user_card.title}}</span> <a slot=right-content @click=pushToWeixin class=\\\"nav-link btn btn-danger btn-sm pull-xs-right\\\">同步到微信</a> </nav-bar> <table class=table> <thead> <tr> <td colspan=2> 卡券基本信息 </td> </tr> </thead> <tbody> <tr> <td style=width:200px;padding-left:50px> <img @click=inputFileClick alt=会员卡Logo class=img-circle width=100 height=100 v-bind:src=user_card.logo /> <input @change=uploadAvatar v-el:avatar class=avatar type=file accept=image/* style=display:none /> </td> <td> <div class=content-form> <form @submit=update> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">卡券名</label> <div class=col-sm-10> <input class=form-control placeholder=卡券名 type=text v-model=user_card.title /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">特权说明</label> <div class=col-sm-10> <input class=form-control placeholder=特权说明 type=text v-model=user_card.prerogative /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">使用说明</label> <div class=col-sm-10> <input class=form-control placeholder=使用说明 type=text v-model=user_card.description /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">使用提醒</label> <div class=col-sm-10> <input class=form-control placeholder=使用提醒 type=text v-model=user_card.notice /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">服务电话</label> <div class=col-sm-10> <input class=form-control placeholder=服务电话 type=text v-model=user_card.service_phone /> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\"></label> <div class=col-sm-10> <input type=submit name=commit value=\\\"保 存\\\" class=\\\"btn btn-primary\\\"/> </div> </div> </form> </div> </td> </tr> </tbody> </table> <form @submit=updateRules> <table class=table> <thead> <tr> <td colspan=2> 卡券金融信息 </td> </tr> </thead> <tbody> <tr> <td colspan=2> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">消费金额</label> <div class=col-sm-4> <input class=form-control placeholder=消费金额 type=text v-model=user_card.cost_money_unit /> <small class=text-muted>以分为单位</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">增加积分</label> <div class=col-sm-4> <input class=form-control placeholder=增加积分 type=text v-model=user_card.increase_bonus /> <small class=text-muted>对应增加的积分</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">积分上限</label> <div class=col-sm-4> <input class=form-control placeholder=积分上限 type=text v-model=user_card.max_increase_bonus /> <small class=text-muted>用户单次可获取的积分上限</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">初始积分</label> <div class=col-sm-4> <input class=form-control placeholder=初始积分 type=text v-model=user_card.init_increase_bonus /> <small class=text-muted>初始设置积分</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">最低使用</label> <div class=col-sm-4> <input class=form-control placeholder=最低使用 type=text v-model=user_card.cost_bonus_unit /> <small class=text-muted>每次最低使用积分</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">抵扣金额</label> <div class=col-sm-4> <input class=form-control placeholder=抵扣金额 type=text v-model=user_card.reduce_money /> <small class=text-muted>抵扣xx元，（这里以分为单位）</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">抵扣条件</label> <div class=col-sm-4> <input class=form-control placeholder=抵扣条件 type=text v-model=user_card.least_money_to_use_bonus /> <small class=text-muted>满xx元（这里以分为单位）可用。</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">单笔最多</label> <div class=col-sm-4> <input class=form-control placeholder=单笔最多 type=text v-model=user_card.max_reduce_bonus /> <small class=text-muted>单笔最多使用xx积分。</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">享受折扣</label> <div class=col-sm-4> <input class=form-control placeholder=享受折扣 type=text v-model=user_card.discount /> <small class=text-muted>该卡享受的折扣优惠,填10就是九折。</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">储值说明</label> <div class=col-sm-4> <input class=form-control placeholder=储值说明 type=text v-model=user_card.balance_rules /> <small class=text-muted>该卡储值功能说明</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">积分规则</label> <div class=col-sm-4> <input class=form-control placeholder=积分规则 type=text v-model=user_card.bonus_rules /> <small class=text-muted>该卡积分规则</small> </div> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\">积分清零规则</label> <div class=col-sm-4> <input class=form-control placeholder=清零规则 type=text v-model=user_card.bonus_cleared /> <small class=text-muted>积分清零规则</small> </div> </div> <div class=\\\"form-group row\\\"> <label for=inputEmail3 class=\\\"col-sm-2 form-control-label\\\"></label> <div class=col-sm-10> <input type=submit name=commit value=\\\"保 存\\\" class=\\\"btn btn-primary\\\"/> </div> </div> </td> </tr> </tbody> </table> </form> <table class=table> <tr> <td colspan=4> 拥有此卡的用户 </td> </tr> <tr v-for=\\\"user_card_user in user_card.user_card_users\\\"> <td> {{user_card_user.user.nickname}} </td> </tr> </table>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/card.vue\n ** module id = 110\n ** module chunks = 21\n **/","var __vue_script__, __vue_template__\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./card.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./card.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/views/card.vue\n ** module id = 138\n ** module chunks = 21\n **/"],"sourceRoot":""}